<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.zippy.common.mapper.CommonMapper">
	<!-- 찜 추가 -->
	<insert id="addWish" parameterType="BookmarkVO">
		<selectKey keyProperty="bookmarkNo" order="BEFORE"
			resultType="int">
			SELECT NVL(MAX(bookmark_no),0) +1 AS bookmarkNo
			FROM bookmark
		</selectKey>
		INSERT INTO bookmark
		(
			bookmark_no,
			email,
			service_type,
			service_id
		)
		VALUES
		(
			#{bookmarkNo}
			,#{email}
			,#{serviceType}
			,#{serviceId}
		)
	</insert>
	
	<delete id="delWish" parameterType="int">
		DELETE 
		FROM bookmark
		WHERE bookmark_no = #{bNo}
	</delete>
	
	<select id="getWishOne" resultType="BookmarkVO" parameterType="hashmap">
		SELECT * 
		FROM bookmark
		WHERE service_id = #{sId}
		AND email = #{email}
	</select>
	
	<select id="getWishAll" resultType="BookmarkVO" parameterType="String">
		SELECT p.product_name,
			   p.product_price,
			   p.product_location,
			   b.bookmark_no, 
			   b.email,
			   b.service_type,
			   b.service_id
		FROM used_product p, bookmark b
		WHERE p.product_no = b.service_id
		AND b.email = #{email}
	</select>
</mapper>